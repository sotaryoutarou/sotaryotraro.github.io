{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-prismjs/","result":{"data":{"site":{"siteMetadata":{"title":"ソタのほほん地下貯蔵庫"}},"markdownRemark":{"id":"87e7b7d7-d841-58e5-bafd-c1c50445426e","excerpt":"これなに Starter Blogのデフォルトで用意されているコードハイライトがちょいダサなので、いい感じにしたい。  前提 GatsbyのテーマはStarter Blogを利用しています。 ちょい調べた結果 Prism JS…","html":"<h2>これなに</h2>\n<p><a href=\"https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog\">Starter Blog</a>のデフォルトで用意されているコードハイライトがちょいダサなので、いい感じにしたい。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55b36ab5540a9e15b79ea84beea55e77/d9199/ASIS.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.486486486486484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABK0lEQVQoz32Q2U7DMBBF8/8fhYSEQIJWgiLS0Cx1NjtxNsdLA0+XiStEBRUPx74jecZHE5h5ghINdNPC6QndMGCWEq5pYFcoD30J2aXoe4ZxKKnOYaYBJ63gqH9lzSvBcjIYU2p4i6GnFpujQB0fYXchdBRD7WOU9SsidoO0vEfOt2DVBmPXXh94cjQwq9DtE2gl8VI0EFkOG75DxynUIUXNQ8TFHY7VIyqxQ8GfMfXyH8OEDMPEG26ZAE/YhWHiDQ/5LRk+gNVPZLj9Y+jWvA60dKhaYBYCemxx4BJdxWEzBlNW0Ix21hXgbYimjdDKmPaZ0dv+x+6CwKgJRg1Y7Ox//DQKi6FsNTF7FqPxYYxn8eiz3RUCZy0cPbJaw/r7nN1af2OuYXzfb74AJOUNq3lCd0oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"デフォルトのコードハイライト\"\n        title=\"デフォルトのコードハイライト\"\n        src=\"/static/55b36ab5540a9e15b79ea84beea55e77/fcda8/ASIS.png\"\n        srcset=\"/static/55b36ab5540a9e15b79ea84beea55e77/12f09/ASIS.png 148w,\n/static/55b36ab5540a9e15b79ea84beea55e77/e4a3f/ASIS.png 295w,\n/static/55b36ab5540a9e15b79ea84beea55e77/fcda8/ASIS.png 590w,\n/static/55b36ab5540a9e15b79ea84beea55e77/efc66/ASIS.png 885w,\n/static/55b36ab5540a9e15b79ea84beea55e77/d9199/ASIS.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>前提</h3>\n<p>Gatsbyのテーマは<a href=\"https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog\">Starter Blog</a>を利用しています。</p>\n<h2>ちょい調べた結果</h2>\n<p><a href=\"https://prismjs.com/\">Prism JS</a>というものを使っているらしいので、このパラメータをカスタマイズすれば良さそう。</p>\n<h2>テーマ変更</h2>\n<p>デフォルトで設定されているテーマのimportは削除しておきます。</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-browser.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"prismjs/themes/prism.css\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><a href=\"https://prismjs.com/\">Prism JS</a>のページでお好きなテーマを探してください。</p>\n<p><img src=\"/c1db271571c9c368a8795597278ec9dd/prismjs.gif\" alt=\"prismjsのテーマ確認\"></p>\n<p>今回はTOMORROW NIGHTを利用するので、以下のようにimportします。 <code class=\"language-text\">&quot;prismjs/themes/prism-{テーマ名}.css&quot;</code></p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-browser.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"prismjs/themes/prism-tomorrow.css\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>ここまででテーマが変わります。</p>\n<h3><a href=\"https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog\">Starter Blog</a>を利用していない場合</h3>\n<p>パッケージ導入</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -S prismjs gatsby-remark-prismjs gatsby-remark-prismjs-title</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code class=\"language-text\">gatsby-config</code> の書き換え</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-config.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\noptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs-title</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>行番号付与</h2>\n<p>ついでに行番号も付与します。 <code class=\"language-text\">gatsby-remark-prismjs</code> のオプションを設定していきます。</p>\n<p>Before</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-config.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token comment\">/* ~略~ */</span>\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>After</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-config.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token comment\">/* ~略~ */</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              classPrefix<span class=\"token operator\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n              inlineCodeMarker<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n              aliases<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n              showLineNumbers<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n              noInlineHighlight<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>次にCSSを読み込みます。</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-browser.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"prismjs/plugins/line-numbers/prism-line-numbers.css\"</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>ここで問題なのが、行番号の表示がずれてしまっています。こりゃいかん。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/45f84914953a6e660bf568b49031c2c2/c6162/before-css.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.243243243243242%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqUlEQVQY04XLuwqCYABAYV+joALxklqY5aWLBX8NpuVQq0P6i5Dv/wAnHYImG77tHKUoCpqmQcqaupadGvklJVXVkcP691WWvNsWZTIesQ08ok3I9eRwild4x4j1IWCxXKBpGrquDzIMA1VVcV0XRZ1NiXch8fZAfllxESHBOSYSe7y1hzW3sG17kOM4mKaJ7/soQgjueU6WZdw62Y807aV/9W2SJDweTz6f9o0HdHY58AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"行番号CSS当てる前\"\n        title=\"行番号CSS当てる前\"\n        src=\"/static/45f84914953a6e660bf568b49031c2c2/fcda8/before-css.png\"\n        srcset=\"/static/45f84914953a6e660bf568b49031c2c2/12f09/before-css.png 148w,\n/static/45f84914953a6e660bf568b49031c2c2/e4a3f/before-css.png 295w,\n/static/45f84914953a6e660bf568b49031c2c2/fcda8/before-css.png 590w,\n/static/45f84914953a6e660bf568b49031c2c2/efc66/before-css.png 885w,\n/static/45f84914953a6e660bf568b49031c2c2/c83ae/before-css.png 1180w,\n/static/45f84914953a6e660bf568b49031c2c2/c6162/before-css.png 2166w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>CSSで調整します。今回はグローバルなCSSで当ててますがお好みでどうぞ。</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>global.css</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.line-numbers .line-numbers-rows</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 1rem 0 1rem 0.5rem<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>グローバルCSSはこんな感じで読み込みました。</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-browser.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"./src/styles/global.css\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>完成！なんとなくいい感じになった気がする</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49c3277b9aaf6e59abc19cd4e8d01da8/38116/after-css.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAo0lEQVQY043DSwqCUABAUZfhKAklTRPNSvv4IEry0xpsIvlcRELtoFqCLfQGjYJAOnCUqqpomgYp5Wf9va45/1HKhrI80XUvlNFwwDyYEkcLDvGYtZjhixA/DLAsC13XMQyjt2maqKrKpW1RJpbBKorYxRuOO5/tfkW4jwnFEs/zsG0bx3F6u66LpmlcrzeUJEnI84Isy36m6X/zokAIwf3x5A3/LJCMLs767gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"行番号CSS当てた後\"\n        title=\"行番号CSS当てた後\"\n        src=\"/static/49c3277b9aaf6e59abc19cd4e8d01da8/fcda8/after-css.png\"\n        srcset=\"/static/49c3277b9aaf6e59abc19cd4e8d01da8/12f09/after-css.png 148w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/e4a3f/after-css.png 295w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/fcda8/after-css.png 590w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/efc66/after-css.png 885w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/c83ae/after-css.png 1180w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/38116/after-css.png 2086w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>参考記事</h2>\n<ul>\n<li><a href=\"https://www.yo1000.com/gatsby-number-lines\">Gatsby Material Starterで行番号を表示する</a></li>\n<li><a href=\"https://kikunantoka.com/2019/12/03--install-syntax-highlight/\">GatsbyJSで作っているブログでシンタックスハイライトが適用されるようにした</a></li>\n</ul>\n<h2>PR</h2>\n<ul>\n<li><a href=\"https://github.com/sotaryoutarou/sotaryoutarou.github.io/pull/44\">シンタックスハイライト導入</a></li>\n</ul>","frontmatter":{"title":"【Gatsby】Prismで良さげなコードハイライトにして行番号表示もいい感じに調整するで","date":"May 15, 2021","description":"デフォルトのコードブロックの視認性が悪いので調整するよ","hero":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACXklEQVQozz1TXVNSYRA+9130u+qif9BFf6CZLpqauujbpiaaacJCE9QwIRUIhHNAvvFwOOCBIwhICaWWaQp+jD/gcXcJL955d/fs++yzz+5RspXfKNaPUG6dotQ8htk8ET9n7WHV/ie20eij3D5DaWOAdHkXKXNbvvPR1w+RKpG/9kdsxTHug2smCl/YwJeQDm+ggGl/GlPzK/BHTInFspsSH/pFvP3gx7gnjIBWw2LMwqRXw6e5OALxGpRIuoVIugmt8APx1S2xowSQ0LsoVPeHjIjBcqYtsbz1l2I7xHJHbO6QO0gavyRPydOjJdWCmu8gQx+XtCpiuU2sGD8FmO2FaAUaFYvlOhRrU+53Kcw+gzPz3NoeyXUMpVDbl+qsldk6uaxUqB0IYy7CLBgkofekEB9mKH6xJ92xnoyh8KNQoo6Jz6poMRdcxVdi5JqNCoNQYl1YcgFuke9Iqol3E4tUsCuACX1L5BHAcHoD/qiJp68nMebwwO1LYmYhA6f7G4IJW4bgC5cuW2SmPMDnb9wIxm2EaQb+mC1TFsCcuY9YuAu9SqvTPoHVOZeqPDF+yNqxBBkaDsszkqTSPoVeH6BkbcOu2tBJv2Kd1mbWYeDBNS8+Ps5BbxzKPo57Irhzf4zOC7yfCglrZsmy8ACXMy2UGkcEcg5TU9F5dR3mSyf0GjEMTK/DeVvFvKuKIiUZ9b4sbpZaYPGz/1thdjwgXnY+vMRm6wz3Hj7B8o2r2L15BVkqpuStA6haDwW6eZ840WgMxOY/g28GHP0xI3uY18eEV4Xn2V34H91CPGnjAiaBzsJv3JLdAAAAAElFTkSuQmCC","aspectRatio":1.9047619047619047,"src":"/static/759d5a28f41c21f2edf7e68e103ae8b3/f3583/thumbnail.png","srcSet":"/static/759d5a28f41c21f2edf7e68e103ae8b3/dd5bb/thumbnail.png 320w,\n/static/759d5a28f41c21f2edf7e68e103ae8b3/f3dec/thumbnail.png 640w,\n/static/759d5a28f41c21f2edf7e68e103ae8b3/f3583/thumbnail.png 1200w","sizes":"(max-width: 1200px) 100vw, 1200px"}},"publicURL":"/static/759d5a28f41c21f2edf7e68e103ae8b3/thumbnail.png"}}}},"pageContext":{"slug":"/gatsby-prismjs/","previous":{"fields":{"slug":"/php-date-time-testcase/"},"frontmatter":{"title":"【PHP】直近の28/29/30/31まである月から1日ずつ取ってきた配列を作りたいんじゃ"}},"next":null}},"staticQueryHashes":["1324386404","3131367371"]}